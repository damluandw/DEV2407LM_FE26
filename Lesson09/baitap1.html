<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List Cart</title>
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>Ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="list-cart">
            <button class="qty qty-abtract" onclick="abtract()">-</button>
        </tbody>
    </table>
    <script>
        // render dữ liệu
        var listCart = [
            {
                id: 'sp1',
                name: 'iphone 15_1',
                price:  20000000,
                img: 'imgs/iphone15.jpg',
                quatity: 1,
                status: true,
            },
            {
                id: 'sp2',
                name: 'iphone 15_2',
                price:  25000000,
                img: 'imgs/iphone15.jpg',
                quatity: 2,
                status: true,
            },
            {
                id: 'sp3',
                name: 'iphone 15_3',
                price:  30000000,
                img: 'imgs/iphone15.jpg',
                quatity: 5,
                status: true,
            },
        ]
        // render 1 sản phẩm
        function renderCart(cart){
            var renderCart =`<tr>
                <td><img style="width: 10rem;" src="`+cart.img+`" alt="iphone15"></td>
                <td>`+cart.name+`</td>
                <td>`+cart.price+`</td>
                <td > <button class="qty qty-abtract" onclick="abtract('`+cart.id+`')">-</button>`+cart.quatity+`<button class="qty qty-plus" onclick="plus('`+cart.id+`')">+</button></td>
                <td> <button>xoá</button></td>
            </tr>`;
            return renderCart;
        }

        //render 1 list sản phẩm
        function renderListCart(carts){
            var cart ='';
            for(let i =0; i< carts.length; i++){       
                cart += renderCart(carts[i]); 
            }
            document.getElementById("list-cart").innerHTML =cart;      
        }

        //lấy dữ liệu
        renderListCart(listCart);
        
        // document.getElementsByClassName('qty').addEventListener('click',function(){
        //     console.log(this);
        // })
        function abtract(id){
            for(let i =0; i< listCart.length; i++){       
                if(id == listCart[i].id){
                    if(listCart[i].quatity>1){
                        listCart[i].quatity--;
                    }                   
                }
            }
            renderListCart(listCart);
        }

        function plus(id){
            for(let i =0; i< listCart.length; i++){       
                if(id == listCart[i].id){
                    listCart[i].quatity++;                  
                }
            }
            renderListCart(listCart);
        }



    </script>
</body>
</html>